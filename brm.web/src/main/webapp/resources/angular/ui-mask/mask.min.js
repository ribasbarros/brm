/*!
 * angular-ui-mask
 * https://github.com/angular-ui/ui-mask
 * Version: 1.4.7 - 2015-10-17T13:33:56.926Z
 * License: MIT
 */
!function(){"use strict";angular.module("ui.mask",[]).value("uiMaskConfig",{maskDefinitions:{9:/\d/,A:/[a-zA-Z]/,"*":/[a-zA-Z0-9]/},clearOnBlur:!0,eventsToHandle:["input","keyup","click","focus"]}).directive("uiMask",["uiMaskConfig",function(e){function n(e){return e===document.activeElement&&(!document.hasFocus||document.hasFocus())&&!!(e.type||e.href||~e.tabIndex)}return{priority:100,require:"ngModel",restrict:"A",compile:function(){var t=e;return function(e,i,r,a){function u(e){return angular.isDefined(e)?($(e),F?(f(),d(),!0):s()):s()}function o(e){e&&(R=e,F&&i.val(p(g(i.val()))))}function l(e){return F?(P=g(e||""),H=v(P),a.$setValidity("mask",H),H&&P.length?p(P):void 0):e}function c(e){return F?(P=g(e||""),H=v(P),a.$viewValue=P.length?p(P):"",a.$setValidity("mask",H),""===P&&r.required&&a.$setValidity("required",!a.$error.required),H?N?a.$viewValue:P:void 0):e}function s(){return F=!1,h(),angular.isDefined(K)?i.attr("placeholder",K):i.removeAttr("placeholder"),angular.isDefined(L)?i.attr("maxlength",L):i.removeAttr("maxlength"),i.val(a.$modelValue),a.$viewValue=a.$modelValue,!1}function f(){P=Z=g(a.$modelValue||""),q=z=p(P),H=v(P),r.maxlength&&i.attr("maxlength",2*D[D.length-1]),K||i.attr("placeholder",R);for(var e=a.$modelValue,n=a.$formatters.length;n--;)e=a.$formatters[n](e);a.$viewValue=e||"",a.$render()}function d(){I||(i.bind("blur",y),i.bind("mousedown mouseup",w),i.bind(W.eventsToHandle.join(" "),V),i.bind("paste",x),I=!0)}function h(){I&&(i.unbind("blur",y),i.unbind("mousedown",w),i.unbind("mouseup",w),i.unbind("input",V),i.unbind("keyup",V),i.unbind("click",V),i.unbind("focus",V),i.unbind("paste",x),I=!1)}function v(e){return e.length?e.length>=j:!0}function g(e){var n="",t=_.slice();return e=e.toString(),angular.forEach(T,function(n){e=e.replace(n,"")}),angular.forEach(e.split(""),function(e){t.length&&t[0].test(e)&&(n+=e,t.shift())}),n}function p(e){var n="",t=D.slice();return angular.forEach(R.split(""),function(i,r){e.length&&r===t[0]?(n+=e.charAt(0)||"_",e=e.substr(1),t.shift()):n+=i}),n}function m(e){var n=angular.isDefined(r.uiMaskPlaceholder)?r.uiMaskPlaceholder:r.placeholder;return"undefined"!=typeof n&&n[e]?n[e]:"_"}function b(){return R.replace(/[_]+/g,"_").replace(/([^_]+)([a-zA-Z0-9])([^_])/g,"$1$2_$3").split("_")}function $(e){var n=0;if(D=[],_=[],R="","string"==typeof e){j=0;var t=!1,i=0,r=e.split("");angular.forEach(r,function(e,r){W.maskDefinitions[e]?(D.push(n),R+=m(r-i),_.push(W.maskDefinitions[e]),n++,t||j++):"?"===e?(t=!0,i++):(R+=e,n++)})}D.push(D.slice().pop()+1),T=b(),F=D.length>1?!0:!1}function y(){W.clearOnBlur&&(B=0,C=0,H&&0!==P.length||(q="",i.val(""),e.$apply(function(){a.$setViewValue("")}))),P!==G&&k(i[0]),G=P}function k(e){var n;"function"!=typeof window.Event||e.fireEvent?"createEvent"in document?(n=document.createEvent("HTMLEvents"),n.initEvent("change",!1,!0),e.dispatchEvent(n)):e.fireEvent&&e.fireEvent("onchange"):(n=new Event("change",{view:window,bubbles:!0,cancelable:!1}),e.dispatchEvent(n))}function w(e){"mousedown"===e.type?i.bind("mouseout",E):i.unbind("mouseout",E)}function E(){C=S(this),i.unbind("mouseout",E)}function x(){A(this,i.val().length)}function V(n){n=n||{};var t=n.which,r=n.type;if(16!==t&&91!==t){var u,o=i.val(),l=z,c=g(o),s=Z,f=O(this)||0,d=B||0,h=f-d,v=D[0],m=D[c.length]||D.slice().shift(),b=C||0,$=S(this)>0,y=b>0,k=o.length>l.length||b&&o.length>l.length-b,w=o.length<l.length||b&&o.length===l.length-b,E=t>=37&&40>=t&&n.shiftKey,x=37===t,V=8===t||"keyup"!==r&&w&&-1===h,_=46===t||"keyup"!==r&&w&&0===h&&!y,R=(x||V||"click"===r)&&f>v;if(C=S(this),!E&&(!$||"click"!==r&&"keyup"!==r)){if("input"===r&&w&&!y&&c===s){for(;V&&f>v&&!M(f);)f--;for(;_&&m>f&&-1===D.indexOf(f);)f++;var T=D.indexOf(f);c=c.substring(0,T)+c.substring(T+1)}for(u=p(c),z=u,Z=c,i.val(u),e.$apply(function(){a.$setViewValue(c)}),k&&v>=f&&(f=v+1),R&&f--,f=f>m?m:v>f?v:f;!M(f)&&f>v&&m>f;)f+=R?-1:1;(R&&m>f||k&&!M(d))&&f++,B=f,A(this,f)}}}function M(e){return D.indexOf(e)>-1}function O(e){if(!e)return 0;if(void 0!==e.selectionStart)return e.selectionStart;if(document.selection&&n(i[0])){e.focus();var t=document.selection.createRange();return t.moveStart("character",e.value?-e.value.length:0),t.text.length}return 0}function A(e,t){if(!e)return 0;if(0!==e.offsetWidth&&0!==e.offsetHeight)if(e.setSelectionRange)n(i[0])&&(e.focus(),e.setSelectionRange(t,t));else if(e.createTextRange){var r=e.createTextRange();r.collapse(!0),r.moveEnd("character",t),r.moveStart("character",t),r.select()}}function S(e){return e?void 0!==e.selectionStart?e.selectionEnd-e.selectionStart:document.selection?document.selection.createRange().text.length:0:0}var D,_,R,T,j,P,q,H,z,Z,B,C,F=!1,I=!1,K=r.placeholder,L=r.maxlength,N=!1;r.$observe("modelViewValue",function(e){"true"===e&&(N=!0)});var W={};r.uiOptions?(W=e.$eval("["+r.uiOptions+"]"),angular.isObject(W[0])&&(W=function(e,n){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(void 0===n[t]?n[t]=angular.copy(e[t]):angular.isObject(n[t])&&angular.extend(n[t],e[t]));return n}(t,W[0]))):W=t,r.$observe("uiMask",u),angular.isDefined(r.uiMaskPlaceholder)?r.$observe("uiMaskPlaceholder",o):r.$observe("placeholder",o),a.$formatters.push(l),a.$parsers.push(c);var G=i.val();i.bind("mousedown mouseup",w),Array.prototype.indexOf||(Array.prototype.indexOf=function(e){if(null===this)throw new TypeError;var n=Object(this),t=n.length>>>0;if(0===t)return-1;var i=0;if(arguments.length>1&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==1/0&&i!==-(1/0)&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=t)return-1;for(var r=i>=0?i:Math.max(t-Math.abs(i),0);t>r;r++)if(r in n&&n[r]===e)return r;return-1})}}}}])}();